<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            padding-bottom: 60px;
        }

        .container {
            padding: 15px;
        }

        h2 {
            margin-bottom: 15px;
            color: #333;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .product-info {
            padding: 15px;
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .product-name {
            font-weight: bold;
            font-size: 16px;
        }

        .product-price {
            color: #e74c3c;
            font-weight: bold;
        }

        .product-meta {
            display: flex;
            gap: 10px;
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        .btn-primary {
            background-color: #3498db;
            color: white;
        }

        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #ccc;
        }

        .favorite-btn.active {
            color: #e74c3c;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 3px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
        <div id="catalog-page" class="page active">
            <h2>–ö–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π</h2>
            <div id="product-list"></div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
        <div id="favorites-page" class="page">
            <h2>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
            <div id="favorites-list"></div>
            <div id="empty-favorites" class="empty-state" style="display: none;">
                <p>–í—ã –µ—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</p>
                <button class="btn btn-primary" onclick="showPage('catalog-page')">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</button>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
        <div id="cart-page" class="page">
            <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
            <div id="cart-items"></div>
            <div id="empty-cart" class="empty-state" style="display: none;">
                <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                <button class="btn btn-primary" onclick="showPage('catalog-page')">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</button>
            </div>
            <div id="order-total" style="margin-top: 20px; display: none;">
                <h3>–ò—Ç–æ–≥–æ: <span id="total-amount">0</span> —Ä—É–±.</h3>
                <button class="btn btn-primary" onclick="placeOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile-page" class="page">
            <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
            <div id="user-info"></div>
            <div style="margin-top: 20px;">
                <h3>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h3>
                <div id="orders-list"></div>
                <div id="empty-orders" class="empty-state" style="display: none;">
                    <p>–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
    <div class="bottom-nav">
        <div class="nav-item" onclick="showPage('catalog-page')">
            <span class="nav-icon">üõçÔ∏è</span>
            <span>–ö–∞—Ç–∞–ª–æ–≥</span>
        </div>
        <div class="nav-item" onclick="showPage('favorites-page')">
            <span class="nav-icon">‚ù§Ô∏è</span>
            <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
        </div>
        <div class="nav-item" onclick="showPage('cart-page')">
            <span class="nav-icon">üõí</span>
            <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
        </div>
        <div class="nav-item" onclick="showPage('profile-page')">
            <span class="nav-icon">üë§</span>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

        // –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Å —Å–µ—Ä–≤–µ—Ä–∞)
        const products = [
            {
                id: '1',
                name: '–ê–Ω–Ω–∞',
                age: 23,
                height: 168,
                weight: 55,
                chest: 3,
                price: 5000,
                description: '–ü—Ä–∏–≤–µ—Ç, —è –ê–Ω–Ω–∞! –õ—é–±–ª—é –∞–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö –∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏. –û—Ç–∫—Ä—ã—Ç–∞ –∫ –Ω–æ–≤—ã–º –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞–º –∏ –æ–±—â–µ–Ω–∏—é.',
                photos: [
                    'https://ru.pinterest.com/pin/347832771237423643/',
                    'https://ru.pinterest.com/pin/228135537369167793/'
                ],
                hours_available: [1, 2, 4, 6, 12]
            },
            {
                id: '2',
                name: '–ú–∞—Ä–∏—è',
                age: 25,
                height: 172,
                weight: 58,
                chest: 2,
                price: 6000,
                description: '–ú–µ–Ω—è –∑–æ–≤—É—Ç –ú–∞—Ä–∏—è. –Ø —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è –ª–∏—á–Ω–æ—Å—Ç—å, –ª—é–±–ª—é –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ –º—É–∑—ã–∫—É. –í—Å–µ–≥–¥–∞ —Ä–∞–¥–∞ –Ω–æ–≤—ã–º –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º.',
                photos: [
                    'https://ru.pinterest.com/pin/137430226132990812/',
                    'https://ru.pinterest.com/pin/1196337403107781/'
                ],
                hours_available: [1, 2, 4, 8]
            }
        ];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const state = {
            favorites: [],
            cart: [],
            viewHistory: []
        };

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
        function renderProducts() {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';

            products.forEach(product => {
                const isFavorite = state.favorites.includes(product.id);

                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.photos[0]}" alt="${product.name}" class="product-image">
                    <button class="favorite-btn ${isFavorite ? 'active' : ''}"
                            onclick="toggleFavorite('${product.id}')">‚ù§</button>
                    <div class="product-info">
                        <div class="product-header">
                            <div>
                                <div class="product-name">${product.name}, ${product.age}</div>
                                <div class="product-meta">
                                    <span>${product.height} —Å–º</span>
                                    <span>${product.weight} –∫–≥</span>
                                    <span>${product.chest} —Ä–∞–∑–º–µ—Ä</span>
                                </div>
                            </div>
                            <div class="product-price">${product.price} —Ä—É–±/—á–∞—Å</div>
                        </div>
                        <button class="btn btn-primary" onclick="showProductDetails('${product.id}')">
                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </button>
                    </div>
                `;
                productList.appendChild(productCard);
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
        function toggleFavorite(productId) {
            const index = state.favorites.indexOf(productId);
            if (index === -1) {
                state.favorites.push(productId);
            } else {
                state.favorites.splice(index, 1);
            }
            renderProducts();
            renderFavorites();
        }

        // –ü–æ–∫–∞–∑ –¥–µ—Ç–∞–ª–µ–π —Ç–æ–≤–∞—Ä–∞
        function showProductDetails(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
            if (!state.viewHistory.includes(productId)) {
                state.viewHistory.unshift(productId);
                if (state.viewHistory.length > 5) {
                    state.viewHistory = state.viewHistory.slice(0, 5);
                }
            }

            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏
            Telegram.WebApp.showPopup({
                title: `${product.name}, ${product.age}`,
                message: product.description,
                buttons: [
                    {id: 'add_to_cart', type: 'default', text: '–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É'},
                    {type: 'cancel'}
                ]
            }, function(btnId) {
                if (btnId === 'add_to_cart') {
                    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
                }
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            renderProducts();
            renderFavorites();
            renderCart();
            renderProfile();
        });
    </script>
</body>
</html>